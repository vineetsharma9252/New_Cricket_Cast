<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cricket Cast</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --cricket-green: #1a5d1a;
        --cricket-gold: #f9a825;
        --cricket-red: #d32f2f;
        --cricket-blue: #1976d2;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Open Sans", sans-serif;
        background: url("https://images.unsplash.com/photo-1531415074968-036ba1b575da?q=80&w=2070&auto=format&fit=crop")
          no-repeat center center fixed;
        background-size: cover;
        position: relative;
        height: 100%;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: -1;
      }

      h1,
      h2,
      h3 {
        font-family: "Montserrat", sans-serif;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: #fff;
      }

      .header-animation {
        animation: pulse 2s infinite alternate;
        text-shadow: 0 0 10px rgba(249, 168, 37, 0.7);
        text-align: center;
        margin: 2rem 0;
      }

      .cricket-description {
        color: #fff;
        font-size: 1.2rem;
        text-align: center;
        max-width: 800px;
        margin: 0 auto 2rem;
        line-height: 1.6;
        animation: fadeIn 0.8s ease-out;
        text-shadow: 0 0 5px rgba(249, 168, 37, 0.3);
      }

      .cricket-instructions {
        max-width: 800px;
        margin: 2rem auto;
        padding: 20px;
        color: black;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 10px;
        border: 2px solid var(--cricket-gold);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .cricket-instructions:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .cricket-instructions::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 30px;
      }

      .cricket-instruction-item h3 {
        color: var(--cricket-green);
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
      }

      .cricket-instruction-item p {
        color: black;
        font-size: 1rem;
        line-height: 1.5;
      }

      .cricket-container {
        width: 80%;
        margin: 2rem auto;
        color: white;
        padding: 30px;
        background: rgba(19, 13, 13, 0.9);
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        border: 3px solid var(--cricket-gold);
        animation: fadeIn 2s ease-out;
      }

      .cricket-section {
        margin: 20px 0;
        padding: 20px;
        background: rgba(0, 0, 0, 0.95);
        border-radius: 10px;
        border: 2px solid var(--cricket-green);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.8s ease;
        position: relative;
      }

      .cricket-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }

      .cricket-section::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 30px;
        
      }

      .cricket-title {
        font-size: 1.5em;
        margin-bottom: 10px;
        color: var(--cricket-green);
        text-transform: uppercase;
      }

      .cricket-inputs {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin: 20px;
      }

      .cricket-error {
        color: var(--cricket-red);
        margin: 10px 0;
        animation: fadeIn 0.5s ease-out;
      }

      .hidden {
        display: none;
      }

      .cricket-input,
      .cricket-select,
      .cricket-search-input {
        padding: 10px;
        border: 2px solid var(--cricket-green);
        border-radius: 8px;
        font-size: 1rem;
        background: rgba(255, 255, 255, 0.95);
        transition: all 0.2s ease;
        width: 100%;
        box-sizing: border-box;
      }

      .cricket-input:focus,
      .cricket-select:focus,
      .cricket-search-input:focus {
        border-color: var(--cricket-gold);
        box-shadow: 0 0 8px rgba(249, 168, 37, 0.3);
        outline: none;
      }

      .cricket-radio-group {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .cricket-radio {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid var(--cricket-green);
        border-radius: 50%;
        cursor: pointer;
        position: relative;
        transition: all 0.2s;
      }

      .cricket-radio:checked {
        background-color: var(--cricket-green);
      }

      .cricket-radio:checked::after {
        content: "âœ“";
        position: absolute;
        color: white;
        font-size: 14px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .submit-btn,
      .clear-btn {
        background: linear-gradient(
          135deg,
          var(--cricket-green) 0%,
          #2e7d32 100%
        );
        color: white;
        border: none;
        padding: 12px 30px;
        font-size: 1.1rem;
        border-radius: 50px;
        box-shadow: 0 4px 15px rgba(26, 93, 26, 0.4);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        cursor: pointer;
      }

      .clear-btn {
        background: linear-gradient(
          135deg,
          var(--cricket-red) 0%,
          #b71c1c 100%
        );
        box-shadow: 0 4px 15px rgba(211, 47, 47, 0.4);
      }

      .submit-btn:hover,
      .clear-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(26, 93, 26, 0.6);
      }

      .clear-btn:hover {
        box-shadow: 0 6px 20px rgba(211, 47, 47, 0.6);
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .submit-btn::after,
      .clear-btn::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        transform: rotate(30deg);
        animation: shine 3s infinite;
      }

      .score-display {
        color: var(--cricket-gold);
        position: relative;
        animation: pulse 1.5s infinite;
      }

      .score-display::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--cricket-gold);
        transform: scaleX(0);
        transform-origin: left;
        animation: expand 1s infinite alternate;
      }

      .cricket-back-btn {
        background: var(--cricket-green);
        color: white;
        border: 2px solid var(--cricket-gold);
        border-radius: 20px;
        padding: 8px 20px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
      }

      .cricket-back-btn:hover {
        background: #2e7d32;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .cricket-ball {
        width: 30px;
        height: 30px;
        background: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
        border-radius: 50%;
        display: inline-block;
        margin: 0 10px;
        position: relative;
        animation: spin 2s linear infinite;
      }

      .cricket-ball::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
      }

      .cricket-ball::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100%;
        height: 2px;
        background: white;
        transform: translate(-50%, -50%) rotate(45deg);
      }

      .cricket-update-section {
        margin: 20px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 10px;
        border: 2px solid var(--cricket-green);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
      }

      .cricket-update-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      }
      .cricket-update-section::before {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 30px;
        background: repeating-linear-gradient(
          45deg,
          rgba(255, 255, 255, 0.1),
          rgba(255, 255, 255, 0.1) 10px,
          rgba(0, 0, 0, 0.1) 10px,
          rgba(0, 0, 0, 0.1) 20px
        );
      }

      .cricket-update-fields {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin: 20px;
      }

      .shake {
        animation: shake 0.5s ease-in-out;
      }

      @keyframes shine {
        0% {
          left: -50%;
        }
        100% {
          left: 150%;
        }
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.03);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes expand {
        to {
          transform: scaleX(1);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      @media (max-width: 600px) {
        .cricket-input,
        .cricket-select,
        .cricket-search-input {
          font-size: 0.9rem;
          padding: 8px;
        }
        .submit-btn,
        .clear-btn {
          padding: 10px 20px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <h1 class="header-animation">
      <span class="cricket-ball"></span>
      Welcome to Cricket Cast
      <span class="cricket-ball"></span>
    </h1>
    <p class="cricket-description">
      Cricket Cast brings the thrill of cricket to your fingertips! Predict the
      final score of a match by analyzing key factors like teams, players, and
      current game state. Test your cricket knowledge and see how close you get!
    </p>
    <div class="cricket-instructions">
      <div class="cricket-instruction-item">
        <h3>Score Prediction</h3>
        <p>
          To predict a match score, select the innings, venue, batting and
          bowling teams, current over, ball, and score. Search for and select the batter,
          bowler, and non-striker using the search inputs and dropdowns, then click "Predict Score"
          to see the result. Double-tap the "Clear Form" button to reset all
          inputs.
        </p>
      </div>
    </div>
    <div class="cricket-container">
      <button class="cricket-back-btn" onclick="window.location.href='/'">
        Back
      </button>
      <!-- Score Prediction Section -->
      <div class="cricket-section">
        <h2 class="cricket-title">Score Prediction</h2>
        {% if error %}
        <div id="error-message" class="cricket-error">{{ error }}</div>
        {% endif %}
        <form id="score-prediction-form" method="POST">
          {% csrf_token %}
          <div class="cricket-inputs">
            <strong>Innings</strong>
            <div class="cricket-radio-group">
              <input
                type="radio"
                value="1"
                name="innings"
                class="cricket-radio"
                required
                checked
              />
              <label>1</label>
              <input
                type="radio"
                value="2"
                name="innings"
                class="cricket-radio"
                required
              />
              <label>2</label>
            </div>

            <select
              id="venue-dropdown"
              name="venue"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select a venue</option>
            </select>

            <select
              name="batter_team"
              id="batter_team"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select batting team</option>
              <option value="1">Kolkata Knight Riders</option>
              <option value="2">Royal Challengers Bangalore</option>
              <option value="3">Chennai Super Kings</option>
              <option value="4">Punjab Kings</option>
              <option value="5">Rajasthan Royals</option>
              <option value="6">Delhi Capitals</option>
              <option value="7">Mumbai Indians</option>
              <option value="8">Sunrisers Hyderabad</option>
              <option value="9">Gujarat Titans</option>
              <option value="10">Lucknow Super Giants</option>
            </select>

            <select
              name="bowler_team"
              id="bowler_team"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select bowling team</option>
              <option value="1">Kolkata Knight Riders</option>
              <option value="2">Royal Challengers Bangalore</option>
              <option value="3">Chennai Super Kings</option>
              <option value="4">Punjab Kings</option>
              <option value="5">Rajasthan Royals</option>
              <option value="6">Delhi Capitals</option>
              <option value="7">Mumbai Indians</option>
              <option value="8">Sunrisers Hyderabad</option>
              <option value="9">Gujarat Titans</option>
              <option value="10">Lucknow Super Giants</option>
            </select>

            <input
              type="number"
              name="over"
              id="Over"
              placeholder="Over"
              min="0"
              max="20"
              value="1"
              class="cricket-input"
              required
            />
            <input
              type="number"
              name="ball"
              id="Ball"
              placeholder="Ball"
              min="0"
              max="6"
              value="1"
              class="cricket-input"
              required
            />
            <input
              type="number"
              name="current_score"
              id="current_score"
              placeholder="{{ current_score | default:0 | escape }}"
              min="0"
              value="{{ current_score | default:0 | escape }}"
              class="cricket-input"
              required
            />

            <input
              type="text"
              id="batter-search"
              class="cricket-search-input"
              placeholder="Search batter..."
            />
            <select
              id="batter-dropdown"
              name="batter_name"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select a batter</option>
            </select>

            <input
              type="text"
              id="bowler-search"
              class="cricket-search-input"
              placeholder="Search bowler..."
            />
            <select
              id="bowler-dropdown"
              name="bowler_name"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select a bowler</option>
            </select>

            <input
              type="text"
              id="non-striker-search"
              class="cricket-search-input"
              placeholder="Search non-striker..."
            />
            <select
              id="non-striker-dropdown"
              name="non_striker_name"
              class="cricket-select"
              required
            >
              <option value="" disabled selected>Select a non-striker</option>
            </select>
          </div>
          <button type="submit" id="submit-btn" class="submit-btn">
            Predict Score
          </button>
          <button
            type="button"
            id="clear-btn"
            class="clear-btn"
            aria-label="Clear all form inputs"
          >
            Clear Form
          </button>
        </form>

        {% if form_submitted %}
        <div id="after_pred" class="cricket-section">
          <h1>
            Predicted Score:
            <span id="predicted-score" class="score-display"
              >{{ final_score }}</span
            >
          </h1>
        </div>

        {% comment %}
        <div class="cricket-update-section" id="give_updates">
          <h2 class="cricket-title">Give Updates</h2>
          <form
            id="update-form"
            method="POST"
            action="{% url 'update_score' %}"
          >
            {% csrf_token %}
            <div class="cricket-update-fields">
              <div>
                <label
                  >Current Over: {{ current_over }}.{{ current_ball }}</label
                >
              </div>

              <div>
                <label for="run_taken">Runs Taken:</label>
                <input
                  type="number"
                  id="run_taken"
                  name="run_taken"
                  min="0"
                  max="6"
                  value="0"
                  class="cricket-input"
                  required
                />
              </div>

              <div class="cricket-radio-group">
                <label>Event Type:</label>
                <div>
                  <input
                    type="radio"
                    name="event_type"
                    id="wicket"
                    value="wicket"
                    class="cricket-radio"
                  />
                  <label for="wicket">Wicket</label>
                </div>
                <div>
                  <input
                    type="radio"
                    name="event_type"
                    id="wide"
                    value="wide"
                    class="cricket-radio"
                  />
                  <label for="wide">Wide ball</label>
                </div>
                <div>
                  <input
                    type="radio"
                    name="event_type"
                    id="noball"
                    value="noball"
                    class="cricket-radio"
                  />
                  <label for="noball">No ball</label>
                </div>
                <div>
                  <input
                    type="radio"
                    name="event_type"
                    id="none"
                    value="none"
                    class="cricket-radio"
                    checked
                  />
                  <label for="none">None</label>
                </div>
              </div>

              <div>
                <label for="extras">Extras:</label>
                <input
                  type="number"
                  id="extras"
                  name="extras"
                  min="0"
                  value="0"
                  class="cricket-input"
                  required
                />
              </div>
            </div>
            <button type="submit" id="update_button" class="submit-btn">
              Submit Update
            </button>
          </form>
        </div>
        {% endcomment %} {% endif %}
      </div>
    </div>

    <script>
      const players = [
        "SC Ganguly",
        "BB McCullum",
        "RT Ponting",
        "DJ Hussey",
        "Mohammad Hafeez",
        "R Dravid",
        "W Jaffer",
        "V Kohli",
        "JH Kallis",
        "CL White",
        "MV Boucher",
        "B Akhil",
        "AA Noffke",
        "P Kumar",
        "Z Khan",
        "SB Joshi",
        "PA Patel",
        "ML Hayden",
        "MEK Hussey",
        "MS Dhoni",
        "SK Raina",
        "JDP Oram",
        "S Badrinath",
        "K Goel",
        "JR Hopes",
        "KC Sangakkara",
        "Yuvraj Singh",
        "SM Katich",
        "IK Pathan",
        "T Kohli",
        "YK Pathan",
        "SR Watson",
        "M Kaif",
        "DS Lehmann",
        "RA Jadeja",
        "M Rawat",
        "D Salunkhe",
        "SK Warne",
        "SK Trivedi",
        "G Gambhir",
        "V Sehwag",
        "S Dhawan",
        "L Ronchi",
        "ST Jayasuriya",
        "DJ Thornely",
        "RV Uthappa",
        "PR Shah",
        "AM Nayar",
        "SM Pollock",
        "Harbhajan Singh",
        "S Chanderpaul",
        "LRPL Taylor",
        "AC Gilchrist",
        "Y Venugopal Rao",
        "VVS Laxman",
        "A Symonds",
        "RG Sharma",
        "SB Styris",
        "AS Yadav",
        "SB Bangar",
        "WPUJC Vaas",
        "RP Singh",
        "WP Saha",
        "LR Shukla",
        "DPMD Jayawardene",
        "S Sohal",
        "B Lee",
        "PP Chawla",
        "WA Mota",
        "Kamran Akmal",
        "Shahid Afridi",
        "DJ Bravo",
        "MA Khote",
        "A Nehra",
        "GC Smith",
        "Pankaj Singh",
        "RR Sarwan",
        "S Sreesanth",
        "VRV Singh",
        "SS Tiwary",
        "DS Kulkarni",
        "R Vinay Kumar",
        "AB Agarkar",
        "M Kartik",
        "I Sharma",
        "AM Rahane",
        "Shoaib Malik",
        "MK Tiwary",
        "KD Karthik",
        "R Bhatia",
        "MF Maharoof",
        "VY Mahesh",
        "TM Srivastava",
        "B Chipli",
        "DW Steyn",
        "DB Das",
        "MK Pandey",
        "HH Gibbs",
        "DNT Zoysa",
        "D Kalyankrishna",
        "SE Marsh",
        "SA Asnodkar",
        "Sohail Tanvir",
        "Salman Butt",
        "BJ Hodge",
        "Umar Gul",
        "AB Dinda",
        "SP Fleming",
        "S Vidyut",
        "JA Morkel",
        "AB de Villiers",
        "LPC Silva",
        "DB Ravi Teja",
        "Misbah-ul-Haq",
        "YV Takawale",
        "RR Raje",
        "PJ Sangwan",
        "Mohammad Asif",
        "GD McGrath",
        "Joginder Sharma",
        "MS Gony",
        "M Muralitharan",
        "M Ntini",
        "DT Patil",
        "A Kumble",
        "S Anirudha",
        "MM Patel",
        "CK Kapugedera",
        "A Chopra",
        "T Taibu",
        "J Arunkumar",
        "PP Ojha",
        "SP Goswami",
        "SR Tendulkar",
        "U Kaul",
        "TM Dilshan",
        "A Mishra",
        "AD Mascarenhas",
        "NK Patel",
        "LA Pomersbach",
        "Iqbal Abdulla",
        "Younis Khan",
        "PM Sarvesh Kumar",
        "DP Vijaykumar",
        "Shoaib Akhtar",
        "Abdur Razzak",
        "H Das",
        "DR Smith",
        "SD Chitnis",
        "CRD Fernando",
        "VS Yeligati",
        "L Balaji",
        "A Mukund",
        "RR Powar",
        "JP Duminy",
        "A Flintoff",
        "T Thushara",
        "JD Ryder",
        "KP Pietersen",
        "T Henderson",
        "Kamran Khan",
        "RS Bopara",
        "CH Gayle",
        "MC Henriques",
        "R Bishnoi",
        "FH Edwards",
        "KV Sharma",
        "PC Valthaty",
        "RJ Quiney",
        "AS Raut",
        "Yashpal Singh",
        "M Manhas",
        "AA Bilakhia",
        "AN Ghosh",
        "BAW Mendis",
        "DL Vettori",
        "MN van Wyk",
        "RE van der Merwe",
        "TL Suman",
        "Shoaib Ahmed",
        "GR Napier",
        "KP Appanna",
        "LA Carseldine",
        "NV Ojha",
        "SM Harwood",
        "M Vijay",
        "SB Jakati",
        "DA Warner",
        "RJ Harris",
        "D du Preez",
        "M Morkel",
        "AD Mathews",
        "J Botha",
        "C Nanda",
        "SL Malinga",
        "Mashrafe Mortaza",
        "A Singh",
        "GJ Bailey",
        "AB McDonald",
        "Y Nagar",
        "SS Shaikh",
        "R Ashwin",
        "Mohammad Ashraful",
        "CA Pujara",
        "OA Shah",
        "Anirudh Singh",
        "Jaskaran Singh",
        "AP Tare",
        "AT Rayudu",
        "R Sathish",
        "R McLaren",
        "AA Jhunjhunwala",
        "P Dogra",
        "A Uniyal",
        "MS Bisla",
        "YA Abdulla",
        "EJG Morgan",
        "JM Kemp",
        "S Tyagi",
        "RS Gavaskar",
        "SE Bond",
        "KA Pollard",
        "S Ladda",
        "DP Nannes",
        "MJ Lumb",
        "DR Martyn",
        "S Narwal",
        "AB Barath",
        "Bipul Sharma",
        "FY Fazal",
        "AC Voges",
        "MD Mishra",
        "UT Yadav",
        "J Theron",
        "SJ Srivastava",
        "R Sharma",
        "Mandeep Singh",
        "KM Jadhav",
        "SW Tait",
        "KB Arun Karthik",
        "KAJ Roach",
        "PD Collingwood",
        "CK Langeveldt",
        "VS Malik",
        "A Mithun",
        "AP Dole",
        "AN Ahmed",
        "RS Sodhi",
        "DE Bollinger",
        "S Sriram",
        "B Sumanth",
        "C Madan",
        "AG Paunikar",
        "MR Marsh",
        "AJ Finch",
        "STR Binny",
        "Harmeet Singh",
        "IR Jaggi",
        "DT Christian",
        "UBT Chand",
        "DJ Jacobs",
        "AL Menaria",
        "MA Agarwal",
        "AUK Pathan",
        "Sunny Singh",
        "JJ van der Wath",
        "R Ninan",
        "S Aravind",
        "DH Yagnik",
        "S Randiv",
        "BJ Haddin",
        "MS Wade",
        "J Syed Mohammad",
        "RN ten Doeschate",
        "TR Birt",
        "AG Murtaza",
        "I Malhotra",
        "L Ablish",
        "AC Blizzard",
        "CA Ingram",
        "S Nadeem",
        "VR Aaron",
        "JEC Franklin",
        "BA Bhatt",
        "Shakib Al Hasan",
        "F du Plessis",
        "RE Levi",
        "GJ Maxwell",
        "KK Cooper",
        "JP Faulkner",
        "HV Patel",
        "DAJ Bracewell",
        "DJ Harris",
        "Ankit Sharma",
        "SP Narine",
        "AA Chavan",
        "GB Hogg",
        "RR Bhatkal",
        "CJ McKay",
        "N Saini",
        "DA Miller",
        "Azhar Mahmood",
        "NLTC Perera",
        "RJ Peterson",
        "KMDN Kulasekara",
        "A Ashish Reddy",
        "V Pratap Singh",
        "Gurkeerat Singh",
        "PA Reddy",
        "P Awana",
        "AD Russell",
        "P Negi",
        "A Chandila",
        "CA Lynn",
        "P Parameswaran",
        "Sunny Gupta",
        "MC Juneja",
        "KK Nair",
        "MDKJ Perera",
        "R Shukla",
        "B Laughlin",
        "AS Rajpoot",
        "JD Unadkat",
        "GH Vihari",
        "Mohammed Shami",
        "BMAJ Mendis",
        "M Vohra",
        "R Rampaul",
        "CH Morris",
        "SV Samson",
        "SMSM Senanayake",
        "BJ Rohrer",
        "KL Rahul",
        "R Dhawan",
        "MG Johnson",
        "Q de Kock",
        "BB Samantray",
        "CM Gautam",
        "X Thalaivan Sargunam",
        "DJG Sammy",
        "MM Sharma",
        "Sandeep Sharma",
        "S Kaul",
        "Sachin Baby",
        "PV Tambe",
        "NM Coulter-Nile",
        "SA Yadav",
        "CJ Anderson",
        "NJ Maddinson",
        "AR Patel",
        "JJ Bumrah",
        "JDS Neesham",
        "SPD Smith",
        "B Kumar",
        "TG Southee",
        "S Rana",
        "MA Starc",
        "BR Dunk",
        "RR Rossouw",
        "KW Richardson",
        "Shivam Sharma",
        "YS Chahal",
        "LMP Simmons",
        "VH Zol",
        "BCJ Cutting",
        "Imran Tahir",
        "WD Parnell",
        "BE Hendricks",
        "S Gopal",
        "M de Lange",
        "R Tewatia",
        "JO Holder",
        "Karanveer Singh",
        "SS Iyer",
        "DJ Hooda",
        "Anureet Singh",
        "KS Williamson",
        "Parvez Rasool",
        "SA Abbott",
        "J Suchith",
        "RG More",
        "HH Pandya",
        "D Wiese",
        "SN Khan",
        "MJ McClenaghan",
        "DJ Muthuswami",
        "PJ Cummins",
        "SN Thakur",
        "CR Brathwaite",
        "MP Stoinis",
        "Ishan Kishan",
        "C Munro",
        "JC Buttler",
        "P Sahu",
        "KH Pandya",
        "AD Nath",
        "MJ Guptill",
        "KJ Abbott",
        "TM Head",
        "NS Naik",
        "RR Pant",
        "SW Billings",
        "KC Cariappa",
        "Swapnil Singh",
        "HM Amla",
        "F Behardien",
        "N Rana",
        "BB Sran",
        "S Kaushik",
        "J Yadav",
        "ER Dwivedi",
        "CJ Jordan",
        "TS Mills",
        "A Choudhary",
        "JJ Roy",
        "Vishnu Vinod",
        "Basil Thampi",
        "CR Woakes",
        "V Shankar",
        "Rashid Khan",
        "C de Grandhomme",
        "Mohammad Nabi",
        "AJ Tye",
        "K Rabada",
        "Kuldeep Yadav",
        "S Badree",
        "AR Bawne",
        "SP Jackson",
        "Ankit Soni",
        "AF Milne",
        "MN Samuels",
        "TA Boult",
        "E Lewis",
        "DL Chahar",
        "MA Wood",
        "RK Singh",
        "DJM Short",
        "BA Stokes",
        "RA Tripathi",
        "K Gowtham",
        "TK Curran",
        "M Markande",
        "B Stanlake",
        "Mujeeb Ur Rahman",
        "Washington Sundar",
        "A Dananjaya",
        "Shubman Gill",
        "Shivam Mavi",
        "Mohammed Siraj",
        "H Klaasen",
        "RK Bhui",
        "JC Archer",
        "PP Shaw",
        "LE Plunkett",
        "Mustafizur Rahman",
        "AD Hales",
        "MK Lomror",
        "M Ashwin",
        "DR Shorey",
        "MM Ali",
        "M Prasidh Krishna",
        "P Chopra",
        "JPR Scantlebury-Searles",
        "Abhishek Sharma",
        "IS Sodhi",
        "SO Hetmyer",
        "S Dube",
        "Navdeep Saini",
        "JM Bairstow",
        "KMA Paul",
        "Rasikh Salam",
        "N Pooran",
        "P Ray Barman",
        "SM Curran",
        "GC Viljoen",
        "Avesh Khan",
        "S Lamichhane",
        "RD Chahar",
        "HF Gurney",
        "SD Lad",
        "AS Joseph",
        "R Parag",
        "MJ Santner",
        "JL Denly",
        "LS Livingstone",
        "KK Ahmed",
        "AJ Turner",
        "Harpreet Brar",
        "SE Rutherford",
        "Y Prithvi Raj",
        "P Simran Singh",
        "JL Pattinson",
        "A Nortje",
        "T Banton",
        "LH Ferguson",
        "D Padikkal",
        "YBK Jaiswal",
        "RD Gaikwad",
        "TU Deshpande",
        "Abdul Samad",
        "PK Garg",
        "JR Philippe",
        "Kartik Tyagi",
        "KL Nagarkoti",
        "CV Varun",
        "I Udana",
        "Ravi Bishnoi",
        "Shahbaz Ahmed",
        "AT Carey",
        "N Jagadeesan",
        "T Natarajan",
        "P Dubey",
        "SS Cottrell",
        "Arshdeep Singh",
        "DR Sams",
        "M Jansen",
        "RM Patidar",
        "KA Jamieson",
        "M Shahrukh Khan",
        "JA Richardson",
        "Lalit Yadav",
        "Virat Singh",
        "FA Allen",
        "C Sakariya",
        "DJ Malan",
        "KS Bharat",
        "PWH de Silva",
        "VR Iyer",
        "GD Phillips",
        "GHS Garton",
        "AK Markram",
        "K Yadav",
        "T Shamsi",
        "NT Ellis",
        "RV Patel",
        "TL Seifert",
        "Anmolpreet Singh",
        "Anuj Rawat",
        "TH David",
        "DP Conway",
        "Tilak Varma",
        "R Powell",
        "PBB Rajapaksa",
        "RA Bawa",
        "OF Smith",
        "A Badoni",
        "PVD Chameera",
        "A Manohar",
        "R Shepherd",
        "DJ Willey",
        "D Pretorius",
        "JM Sharma",
        "VG Arora",
        "Mukesh Choudhary",
        "Umran Malik",
        "D Brevis",
        "B Sai Sudharsan",
        "Ramandeep Singh",
        "HE van der Dussen",
        "SS Prabhudessai",
        "Akash Deep",
        "JR Hazlewood",
        "KR Sen",
        "Aman Hakim Khan",
        "HR Shokeen",
        "Yash Dayal",
        "DJ Mitchell",
        "Shashank Singh",
        "B Indrajith",
        "Harshit Rana",
        "Mohsin Khan",
        "Simarjeet Singh",
        "M Theekshana",
        "AS Roy",
        "Fazalhaq Farooqi",
        "K Kartikeya",
        "RP Meredith",
        "KS Sharma",
        "T Stubbs",
        "R Sanjay Yadav",
        "A Tomar",
        "PN Mankad",
        "OC McCoy",
        "Sikandar Raza",
        "Rahmanullah Gurbaz",
        "KR Mayers",
        "Mukesh Kumar",
        "HC Brook",
        "AU Rashid",
        "C Green",
        "N Wadhera",
        "Arshad Khan",
        "Abishek Porel",
        "Dhruv Jurel",
        "MG Bracewell",
        "MW Short",
        "Mohit Rathee",
        "YV Dhull",
        "A Zampa",
        "Yudhvir Singh",
        "Atharva Taide",
        "Harpreet Singh",
        "Liton Das",
        "PD Salt",
        "Vijaykumar Vyshak",
        "Abdul Basith",
        "Arjun Tendulkar",
        "JP Behrendorff",
        "AJ Hosein",
        "Naveen-ul-Haq",
        "Noor Ahmad",
        "JE Root",
        "KM Asif",
        "MD Shanaka",
        "Sanvir Singh",
        "Vivrant Sharma",
        "DG Nalkande",
        "R Ravindra",
        "SD Hope",
        "Sumit Kumar",
        "Azmatullah Omarzai",
        "Naman Dhir",
        "G Coetzee",
        "SZ Mulani",
        "Sameer Rizvi",
        "SH Johnson",
        "Akash Madhwal",
        "SB Dubey",
        "Mayank Dagar",
        "RJW Topley",
        "A Raghuvanshi",
        "Ashutosh Sharma",
        "Nithish Kumar Reddy",
        "Saurav Chauhan",
        "Kumar Kushagra",
        "BR Sharath",
        "WG Jacks",
        "J Fraser-McGurk",
        "Tanush Kotian",
        "KA Maharaj",
        "Arshad Khan (2)",
        "R Sai Kishore",
        "L Wood",
        "LB Williams",
        "AA Kulkarni",
        "MJ Suthar",
        "RJ Gleeson",
        "Gulbadin Naib",
        "D Ferreira",
        "A Kamboj",
        "T Kohler-Cadmore",
        "Shivam Singh",
        "V Viyaskanth",
        "P Amarnath",
        "B Geeves",
        "Gagandeep Singh",
        "A Nel",
        "AM Salvi",
        "RR Bose",
        "SS Sarkar",
        "RA Shaikh",
        "C Ganapathy",
        "MB Parmar",
        "SB Wagh",
        "ND Doshi",
        "AA Kazi",
        "Anand Rajan",
        "RW Price",
        "TP Sudhindra",
        "BW Hilfenhaus",
        "P Suyal",
        "MG Neser",
        "IC Pandey",
        "K Santokie",
        "JW Hastings",
        "GS Sandhu",
        "Tejas Baroka",
        "SS Agarwal",
        "NB Singh",
        "MJ Henry",
        "K Khejroliya",
        "L Ngidi",
        "CJ Dala",
        "SC Kuggeleijn",
        "S Midhun",
        "O Thomas",
        "S Sandeep Warrier",
        "CJ Green",
        "Monu Kumar",
        "LI Meriwala",
        "Jalaj S Saxena",
        "Akash Singh",
        "IC Porel",
        "PH Solanki",
        "M Pathirana",
        "J Little",
        "RS Hangargekar",
        "NA Saini",
        "Yash Thakur",
        "Suyash Sharma",
        "SSB Magala",
        "D Jansen",
        "Gurnoor Brar",
        "R Goyal",
        "H Sharma",
        "N Burger",
        "KT Maphaka",
        "M Siddharth",
        "MP Yadav",
        "S Joseph",
        "N Thushara",
        "V Kaverappa",
      ];
      const Venue = [
        "MA Chidambaram Stadium, Chepauk, Chennai",
        "Arun Jaitley Stadium, Delhi",
        "Narendra Modi Stadium, Ahmedabad",
        "Eden Gardens, Kolkata",
        "Bharat Ratna Shri Atal Bihari Vajpayee Ekana Cricket Stadium, Lucknow",
        "Wankhede Stadium, Mumbai",
        "Punjab Cricket Association IS Bindra Stadium, Mohali, Chandigarh",
        "Sawai Mansingh Stadium, Jaipur",
        "M Chinnaswamy Stadium, Bengaluru",
        "Rajiv Gandhi International Stadium, Uppal, Hyderabad",
      ];

      document.addEventListener("DOMContentLoaded", function () {
        // Initialize dropdowns and search inputs
        const venueDropdown = document.getElementById("venue-dropdown");
        const batterDropdown = document.getElementById("batter-dropdown");
        const bowlerDropdown = document.getElementById("bowler-dropdown");
        const nonStrikerDropdown = document.getElementById("non-striker-dropdown");
        const batterSearch = document.getElementById("batter-search");
        const bowlerSearch = document.getElementById("bowler-search");
        const nonStrikerSearch = document.getElementById("non-striker-search");
        const batterTeamDropdown = document.getElementById("batter_team");
        const bowlerTeamDropdown = document.getElementById("bowler_team");
        const form = document.getElementById("score-prediction-form");
        const errorMessage = document.getElementById("error-message");
        const clearButton = document.getElementById("clear-btn");

        // Populate dropdowns
        populateDropdown(venueDropdown, Venue, "venue");
        populateDropdown(batterDropdown, players, "batter_name");
        populateDropdown(bowlerDropdown, players, "bowler_name");
        populateDropdown(nonStrikerDropdown, players, "non_striker_name");

        // Search functionality
        function filterDropdown(dropdown, searchInput) {
          searchInput.addEventListener("input", function () {
            const filter = searchInput.value.toLowerCase();
            const options = dropdown.querySelectorAll("option");
            let hasMatch = false;

            options.forEach((option, index) => {
              if (index === 0) return; // Skip the placeholder option
              const text = option.textContent.toLowerCase();
              if (text.includes(filter)) {
                option.style.display = "";
                hasMatch = true;
              } else {
                option.style.display = "none";
              }
            });

            // If no matches, clear the selection
            if (!hasMatch && dropdown.value !== "") {
              dropdown.value = "";
            }
          });
        }

        filterDropdown(batterDropdown, batterSearch);
        filterDropdown(bowlerDropdown, bowlerSearch);
        filterDropdown(nonStrikerDropdown, nonStrikerSearch);

        // Validate team and player selections
        function validateForm() {
          const batterTeam = batterTeamDropdown.value;
          const bowlerTeam = bowlerTeamDropdown.value;
          const batter = batterDropdown.value;
          const bowler = bowlerDropdown.value;
          const nonStriker = nonStrikerDropdown.value;

          if (batterTeam === bowlerTeam && batterTeam !== "") {
            showError("Batter and bowler teams must be different");
            return false;
          }
          if (
            new Set([batter, bowler, nonStriker]).size < 3 &&
            batter !== "" &&
            bowler !== "" &&
            nonStriker !== ""
          ) {
            showError("Batter, bowler, and non-striker must be different players");
            return false;
          }
          return true;
        }

        function showError(message) {
          if (errorMessage) {
            errorMessage.textContent = message;
            errorMessage.classList.remove("hidden");
          } else {
            alert(message);
          }
        }

        function clearError() {
          if (errorMessage) {
            errorMessage.textContent = "";
            errorMessage.classList.add("hidden");
          }
        }

        // Clear form function
        function clearForm() {
          // Reset radio buttons
          document.querySelector('input[name="innings"][value="1"]').checked = true;
          document.querySelector('input[name="innings"][value="2"]').checked = false;

          // Reset selects
          venueDropdown.value = "";
          batterTeamDropdown.value = "";
          bowlerTeamDropdown.value = "";
          batterDropdown.value = "";
          bowlerDropdown.value = "";
          nonStrikerDropdown.value = "";

          // Reset search inputs
          batterSearch.value = "";
          bowlerSearch.value = "";
          nonStrikerSearch.value = "";

          // Reset number inputs
          document.getElementById("Over").value = 1;
          document.getElementById("Ball").value = 1;
          document.getElementById("current_score").value = 0;

          // Reset dropdown options visibility
          [batterDropdown, bowlerDropdown, nonStrikerDropdown].forEach((dropdown) => {
            const options = dropdown.querySelectorAll("option");
            options.forEach((option) => (option.style.display = ""));
          });

          // Clear local storage
          localStorage.clear();

          // Trigger shake animation
          form.classList.add("shake");
          setTimeout(() => form.classList.remove("shake"), 500);

          clearError();
        }

        // Double-tap detection for touch devices
        let lastTap = 0;
        clearButton.addEventListener("touchstart", function (e) {
          e.preventDefault();
          const currentTime = new Date().getTime();
          const tapLength = currentTime - lastTap;
          if (tapLength < 300 && tapLength > 0) {
            clearForm();
          }
          lastTap = currentTime;
        });

        // Double-click for desktop
        clearButton.addEventListener("dblclick", clearForm);

        // Keyboard support for accessibility
        clearButton.addEventListener("keydown", function (e) {
          if (e.key === "Enter") {
            const now = new Date().getTime();
            if (now - lastTap < 300) {
              clearForm();
            }
            lastTap = now;
          }
        });

        document.getElementById("current_score").value =
          "{{ current_score | default:0 | escapejs }}";
        document.getElementById("current_score").placeholder =
          "{{ current_score | default:0 | escapejs }}";

        console.log("current_score is  ->   {{ current_score }}");

        // Form submission handler
        form.addEventListener("submit", function (e) {
          clearError();
          if (!validateForm()) {
            e.preventDefault();
            return;
          }
          // Submission proceeds without disabling button
        });

        function populateDropdown(dropdown, items, name) {
          dropdown.setAttribute("name", name);
          dropdown.innerHTML = `<option value="" disabled selected>Select a ${name.replace(
            "_",
            " "
          )}</option>`;
          items.forEach((item, index) => {
            const option = document.createElement("option");
            option.value = index + 1;
            option.textContent = item;
            dropdown.appendChild(option);
          });
        }

        function saveFormData() {
          const form = document.getElementById("score-prediction-form");
          const inputs = form.querySelectorAll("input, select");
          inputs.forEach((input) => {
            if (input.type === "radio" || input.type === "checkbox") {
              localStorage.setItem(input.name + "_" + input.value, input.checked);
            } else {
              localStorage.setItem(input.name, input.value);
            }
          });
        }

        function loadFormData() {
          const form = document.getElementById("score-prediction-form");
          const inputs = form.querySelectorAll("input, select");
          inputs.forEach((input) => {
            if (input.type === "radio" || input.type === "checkbox") {
              const checked =
                localStorage.getItem(input.name + "_" + input.value) === "true";
              input.checked = checked;
            } else {
              const value = localStorage.getItem(input.name);
              if (value !== null) input.value = value;
            }
          });
        }

        window.addEventListener("DOMContentLoaded", () => {
          loadFormData();
          const form = document.getElementById("score-prediction-form");
          const inputs = form.querySelectorAll("input, select");
          inputs.forEach((input) => {
            input.addEventListener("change", saveFormData);
          });
        });
      });
    </script>
  </body>
</html>
